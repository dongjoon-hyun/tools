<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta charset="utf-8"/>
    <title>TIP - T Intelligence Platform</title>

    <meta name="description" content="Static &amp; Dynamic Tables"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>

    <!-- bootstrap & fontawesome -->
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="../assets/css/font-awesome.min.css"/>

    <!-- page specific plugin styles -->

    <!-- text fonts -->
    <link rel="stylesheet" href="../assets/css/ace-fonts.css"/>

    <!-- ace styles -->
    <link rel="stylesheet" href="../assets/css/ace.min.css" id="main-ace-style"/>

    <!--[if lte IE 9]>
    <link rel="stylesheet" href="../assets/css/ace-part2.min.css"/>
    <![endif]-->
    <link rel="stylesheet" href="../assets/css/ace-skins.min.css"/>
    <link rel="stylesheet" href="../assets/css/ace-rtl.min.css"/>

    <!--[if lte IE 9]>
    <link rel="stylesheet" href="../assets/css/ace-ie.min.css"/>
    <![endif]-->

    <!-- inline styles related to this page -->

    <!-- ace settings handler -->
    <script src="../assets/js/ace-extra.min.js"></script>

    <!-- HTML5shiv and Respond.js for IE8 to support HTML5 elements and media queries -->

    <!--[if lte IE 8]>
    <script src="../assets/js/html5shiv.min.js"></script>
    <script src="../assets/js/respond.min.js"></script>
    <![endif]-->
</head>

<body class="no-skin">
<!-- #section:basics/navbar.layout -->
<div id="navbar" class="navbar navbar-default">
    <script type="text/javascript">
        try {
            ace.settings.check('navbar', 'fixed')
        } catch (e) {
        }
    </script>

    <div class="navbar-container" id="navbar-container">
        <!-- #section:basics/sidebar.mobile.toggle -->
        <button type="button" class="navbar-toggle menu-toggler pull-left" id="menu-toggler">
            <span class="sr-only">Toggle sidebar</span>

            <span class="icon-bar"></span>

            <span class="icon-bar"></span>

            <span class="icon-bar"></span>
        </button>

        <!-- /section:basics/sidebar.mobile.toggle -->
        <div class="navbar-header pull-left">
            <!-- #section:basics/navbar.layout.brand -->
            <a href="#" class="navbar-brand">
                <small>
                    <i class="fa fa-leaf"></i>
                    T Intelligence Platform
                </small>
            </a>

            <!-- /section:basics/navbar.layout.brand -->

            <!-- #section:basics/navbar.toggle -->

            <!-- /section:basics/navbar.toggle -->
        </div>

        <!-- #section:basics/navbar.dropdown -->
        <div class="navbar-buttons navbar-header pull-right" role="navigation">
            <ul class="nav ace-nav">
                <li class="green">
                    <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                        <i class="ace-icon fa fa-tasks"></i>
                        <span class="badge badge-grey">4</span>
                    </a>

                    <ul class="dropdown-menu-right dropdown-navbar dropdown-menu dropdown-caret dropdown-close">
                        <li class="dropdown-header">
                            <i class="ace-icon fa fa-check"></i>
                            4 Tasks to complete
                        </li>

                        <li>
                            <a href="#">
                                <div class="clearfix">
                                    <span class="pull-left">Software Update</span>
                                    <span class="pull-right">65%</span>
                                </div>

                                <div class="progress progress-mini">
                                    <div style="width:65%" class="progress-bar"></div>
                                </div>
                            </a>
                        </li>

                        <li>
                            <a href="#">
                                <div class="clearfix">
                                    <span class="pull-left">Hardware Upgrade</span>
                                    <span class="pull-right">35%</span>
                                </div>

                                <div class="progress progress-mini">
                                    <div style="width:35%" class="progress-bar progress-bar-danger"></div>
                                </div>
                            </a>
                        </li>

                        <li>
                            <a href="#">
                                <div class="clearfix">
                                    <span class="pull-left">Unit Testing</span>
                                    <span class="pull-right">15%</span>
                                </div>

                                <div class="progress progress-mini">
                                    <div style="width:15%" class="progress-bar progress-bar-warning"></div>
                                </div>
                            </a>
                        </li>

                        <li>
                            <a href="#">
                                <div class="clearfix">
                                    <span class="pull-left">Bug Fixes</span>
                                    <span class="pull-right">90%</span>
                                </div>

                                <div class="progress progress-mini progress-striped active">
                                    <div style="width:90%" class="progress-bar progress-bar-success"></div>
                                </div>
                            </a>
                        </li>

                        <li class="dropdown-footer">
                            <a href="#">
                                See tasks with details
                                <i class="ace-icon fa fa-arrow-right"></i>
                            </a>
                        </li>
                    </ul>
                </li>

                <!-- #section:basics/navbar.user_menu -->
                <li class="light-blue">
                    <a data-toggle="dropdown" href="#" class="dropdown-toggle">
                        <img class="nav-user-photo" src="../assets/avatars/user.jpg" alt="Jason's Photo"/>
                        <span class="user-info"><small>Welcome,</small>Admin</span>

                        <i class="ace-icon fa fa-caret-down"></i>
                    </a>

                    <ul class="user-menu dropdown-menu-right dropdown-menu dropdown-yellow dropdown-caret dropdown-close">
                        <li>
                            <a href="#">
                                <i class="ace-icon fa fa-cog"></i>
                                Settings
                            </a>
                        </li>

                        <li>
                            <a href="profile.html">
                                <i class="ace-icon fa fa-user"></i>
                                Profile
                            </a>
                        </li>

                        <li class="divider"></li>

                        <li>
                            <a href="#">
                                <i class="ace-icon fa fa-power-off"></i>
                                Logout
                            </a>
                        </li>
                    </ul>
                </li>

                <!-- /section:basics/navbar.user_menu -->
            </ul>
        </div>

        <!-- /section:basics/navbar.dropdown -->
    </div>
    <!-- /.navbar-container -->
</div>

<!-- /section:basics/navbar.layout -->
<div class="main-container" id="main-container">
    <script type="text/javascript">
        try {
            ace.settings.check('main-container', 'fixed')
        } catch (e) {
        }
    </script>

    <!-- #section:basics/sidebar -->
    <div id="sidebar" class="sidebar                  responsive">
        <script type="text/javascript">
            try {
                ace.settings.check('sidebar', 'fixed')
            } catch (e) {
            }
        </script>

        <div class="sidebar-shortcuts" id="sidebar-shortcuts">
            <div class="sidebar-shortcuts-large" id="sidebar-shortcuts-large">
                <button class="btn btn-success">
                    <i class="ace-icon fa fa-signal"></i>
                </button>

                <button class="btn btn-info">
                    <i class="ace-icon fa fa-pencil"></i>
                </button>

                <!-- #section:basics/sidebar.layout.shortcuts -->
                <button class="btn btn-warning">
                    <i class="ace-icon fa fa-users"></i>
                </button>

                <button class="btn btn-danger">
                    <i class="ace-icon fa fa-cogs"></i>
                </button>

                <!-- /section:basics/sidebar.layout.shortcuts -->
            </div>

            <div class="sidebar-shortcuts-mini" id="sidebar-shortcuts-mini">
                <span class="btn btn-success"></span>

                <span class="btn btn-info"></span>

                <span class="btn btn-warning"></span>

                <span class="btn btn-danger"></span>
            </div>
        </div>
        <!-- /.sidebar-shortcuts -->

        <ul class="nav nav-list">
            <li>
                <a href="index.html">
                    <i class="menu-icon fa fa-tachometer"></i>
                    <span class="menu-text"> Dashboard </span>
                </a>

                <b class="arrow"></b>
            </li>

            <li class="">
                <a href="#" class="dropdown-toggle">
                    <i class="menu-icon fa fa-list"></i>
                    <span class="menu-text"> Data </span>

                    <b class="arrow fa fa-angle-down"></b>
                </a>

                <b class="arrow"></b>

                <ul class="submenu">
                    <li class="">
                        <a href="text.html">
                            <i class="menu-icon fa fa-caret-right"></i>
                            Text
                        </a>

                        <b class="arrow"></b>
                    </li>

                    <li class="">
                        <a href="image.html">
                            <i class="menu-icon fa fa-caret-right"></i>
                            Image
                        </a>

                        <b class="arrow"></b>
                    </li>

                    <li class="">
                        <a href="audio.html">
                            <i class="menu-icon fa fa-caret-right"></i>
                            Audio
                        </a>

                        <b class="arrow"></b>
                    </li>

                    <li class="">
                        <a href="video.html">
                            <i class="menu-icon fa fa-caret-right"></i>
                            Video
                        </a>

                        <b class="arrow"></b>
                    </li>

                    <li class="">
                        <a href="graph.html">
                            <i class="menu-icon fa fa-caret-right"></i>
                            Graph
                        </a>

                        <b class="arrow"></b>
                    </li>
                </ul>
            </li>

            <li class="">
                <a href="function.html" class="">
                    <i class="menu-icon fa fa-square-o"></i>
                    <span class="menu-text"> Function </span>

                    <b class="arrow"></b>
                </a>

                <b class="arrow"></b>
            </li>

            <li class="">
                <a href="flow.html">
                    <i class="menu-icon fa fa-exchange"></i>
                    <span class="menu-text"> Flow </span>
                </a>
            </li>

            <li class="active">
                <a href="#" class="dropdown-toggle">
                    <i class="menu-icon fa fa-eye"></i>
                    <span class="menu-text"> Demo </span>

                    <b class="arrow fa fa-angle-down"></b>
                </a>

                <b class="arrow"></b>

                <ul class="submenu">
                    <li class="">
                        <a href="nn.html">
                            <i class="menu-icon fa fa-caret-right"></i>
                            Neural Network
                        </a>

                        <b class="arrow"></b>
                    </li>

                    <li class="">
                        <a href="word_cloud.html">
                            <i class="menu-icon fa fa-caret-right"></i>
                            Word Cloud
                        </a>

                        <b class="arrow"></b>
                    </li>

                    <li class="">
                        <a href="ia.html">
                            <i class="menu-icon fa fa-caret-right"></i>
                            Interactive Analysis
                        </a>

                        <b class="arrow"></b>
                    </li>

                    <li class="">
                        <a href="nlp.html">
                            <i class="menu-icon fa fa-caret-right"></i>
                            NLP
                        </a>

                        <b class="arrow"></b>
                    </li>

                    <li class="">
                        <a href="ocr.html">
                            <i class="menu-icon fa fa-caret-right"></i>
                            OCR
                        </a>

                        <b class="arrow"></b>
                    </li>

                    <li class="">
                        <a href="image_tag.html">
                            <i class="menu-icon fa fa-caret-right"></i>
                            Image Tagging
                        </a>

                        <b class="arrow"></b>
                    </li>

                    <li class="">
                        <a href="face.html">
                            <i class="menu-icon fa fa-caret-right"></i>
                            Face Detection
                        </a>

                        <b class="arrow"></b>
                    </li>

                    <li class="">
                        <a href="speech.html">
                            <i class="menu-icon fa fa-caret-right"></i>
                            Speech Recognition
                        </a>

                        <b class="arrow"></b>
                    </li>

                    <li class="">
                        <a href="document.html">
                            <i class="menu-icon fa fa-caret-right"></i>
                            Text Categorization
                        </a>

                        <b class="arrow"></b>
                    </li>

                    <li class="">
                        <a href="security.html">
                            <i class="menu-icon fa fa-caret-right"></i>
                            Document Security
                        </a>

                        <b class="arrow"></b>
                    </li>

                    <li class="active">
                        <a href="video_search.html">
                            <i class="menu-icon fa fa-caret-right"></i>
                            Video Search
                        </a>

                        <b class="arrow"></b>
                    </li>
                </ul>
            </li>

        </ul>
        <!-- /.nav-list -->

        <!-- #section:basics/sidebar.layout.minimize -->
        <div class="sidebar-toggle sidebar-collapse" id="sidebar-collapse">
            <i class="ace-icon fa fa-angle-double-left" data-icon1="ace-icon fa fa-angle-double-left"
               data-icon2="ace-icon fa fa-angle-double-right"></i>
        </div>

        <!-- /section:basics/sidebar.layout.minimize -->
        <script type="text/javascript">
            try {
                ace.settings.check('sidebar', 'collapsed')
            } catch (e) {
            }
        </script>
    </div>

    <!-- /section:basics/sidebar -->
    <div class="main-content">
        <!-- #section:basics/content.breadcrumbs -->
        <div class="breadcrumbs" id="breadcrumbs">
            <script type="text/javascript">
                try {
                    ace.settings.check('breadcrumbs', 'fixed')
                } catch (e) {
                }
            </script>

            <ul class="breadcrumb">
                <li>
                    <i class="ace-icon fa fa-home home-icon"></i>
                    <a href="#">Home</a>
                </li>

                <li>
                    <a href="#">Video Search</a>
                </li>
                <!--li class="active"></li-->
            </ul>
            <!-- /.breadcrumb -->
        </div>

        <!-- /section:basics/content.breadcrumbs -->
        <div class="page-content">
            <div class="page-content-area">
                <div class="page-header">
                    <h1>
                        Video Search
                        <small>
                            <i class="ace-icon fa fa-angle-double-right"></i>

                        </small>
                    </h1>
                </div>
                <!-- /.page-header -->

                <div class="row">
                    <div class="col-xs-12">
                        <!-- PAGE CONTENT BEGINS -->
                        <div class="row">
                            <div class="col-xs-8">
                                <h4>1. Analyze Video</h4>
                                <select class="form-control" id="select-1">
                                    <option value="https://www.youtube.com/watch?v=XLVoMd2pnIs" selected>
                                        https://www.youtube.com/watch?v=XLVoMd2pnIs
                                    </option>
                                    <option value="https://www.youtube.com/watch?v=PyU0PvgVk8o">
                                        https://www.youtube.com/watch?v=PyU0PvgVk8o
                                    </option>
                                    <option value="https://www.youtube.com/watch?v=mxhBaG-1cRc">
                                        https://www.youtube.com/watch?v=mxhBaG-1cRc
                                    </option>
                                </select>

                                <div id="progress1">
                                </div>
                            </div>

                            <!-- /.span -->
                            <div class="col-xs-4">
                                <h4>&nbsp;</h4>
                                <button class="btn btn-danger btn-sm" onclick="analyzeVideo()">
                                    <i class="ace-icon fa fa-flask align-top bigger-125"></i>
                                    Analyze
                                </button>
                            </div>
                            <!-- /.row -->
                        </div>

                        <div>&nbsp;</div>

                        <!-- /.col -->
                        <div class="row">
                            <div class="col-xs-12">
                                <table id="table1" class="table table-striped table-bordered table-hover">
                                    <tr>
                                        <th>Data Type</th>
                                        <th>Content</th>
                                    </tr>
                                    <tr>
                                        <td>Video</td>
                                        <td id="video1">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Audio</td>
                                        <td id="audio1"></td>
                                    </tr>
                                    <tr>
                                        <td>Description</td>
                                        <td id="desc1"></td>
                                    </tr>
                                    <tr>
                                        <td>Thumbnail</td>
                                        <td id="image1"></td>
                                    </tr>
                                    <tr>
                                        <td>Script</td>
                                        <td>
                                                <pre id="script1" class="prettyprint linenums"
                                                     style="font-size: 10px;background-color: transparent; color: black; border:0px"></pre>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-xs-12">
                                <h4>2. Search by Content</h4>
                                <iframe src="http://gnn-f05-04:8088/#/notebook/2AVXEEQRT/paragraph/20150724-144834_1521841618?asIframe"
                                        width="100%" height="350px" frameborder="None">
                                </iframe>
                            </div>
                        </div>
                    </div>
                    <!-- /.row -->
                </div>
                <!-- /.page-content-area -->
            </div>
            <!-- /.page-content -->
        </div>
        <!-- /.main-content -->

        <a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
            <i class="ace-icon fa fa-angle-double-up icon-only bigger-110"></i>
        </a>
    </div>
    <!-- /.main-container -->
</div>
<!-- basic scripts -->

<!--[if !IE]> -->
<script type="text/javascript">
    window.jQuery || document.write("<script src='../assets/js/jquery.min.js'>" + "<" + "/script>");
</script>

<!-- <![endif]-->

<!--[if IE]>
<script type="text/javascript">
    window.jQuery || document.write("<script src='../assets/js/jquery1x.min.js'>" + "<" + "/script>");
</script>
<![endif]-->
<script type="text/javascript">
    if ('ontouchstart' in document.documentElement) document.write("<script src='../assets/js/jquery.mobile.custom.min.js'>" + "<" + "/script>");
</script>
<script src="../assets/js/bootstrap.min.js"></script>

<!-- page specific plugin scripts -->
<script src="../assets/js/jquery.dataTables.min.js"></script>
<script src="../assets/js/jquery.dataTables.bootstrap.js"></script>

<!-- ace scripts -->
<script src="../assets/js/ace-elements.min.js"></script>
<script src="../assets/js/ace.min.js"></script>

<!-- inline scripts related to this page -->
<script type="text/javascript">
    jQuery(function ($) {
        window.prettyPrint && prettyPrint();
        $('#id-check-horizontal').removeAttr('checked').on('click', function () {
            $('#dt-list-1').toggleClass('dl-horizontal').prev().html(this.checked ? '&lt;dl class="dl-horizontal"&gt;' : '&lt;dl&gt;');
        });
    });

    var start = new Date();
    var maxTime = 1 * 1000;
    var timeoutVal = Math.floor(maxTime / 1000);

    function animateUpdate() {
        var now = new Date();
        var timeDiff = now.getTime() - start.getTime();
        var perc = Math.round((timeDiff / maxTime) * 100);
        if (perc <= 100) {
            updateProgress(perc);
            setTimeout(animateUpdate, timeoutVal);
        } else {
            start = new Date();
            $('#progress1').html('');
            clearTimeout();
            showVideo();
        }
    }

    function updateProgress(percent) {
        $('#progress1').html('<div class="progress progress-striped pos-rel" data-percent="' + percent + '%">' +
                '<div class="progress-bar progress-bar-success" style="width: ' + percent + '%;"></div></div>'
        );
    }

    function analyzeVideo() {
        start = new Date();

        var url = $('#select-1 option:selected').text().trim().replace("=", "\\=");
        var id = url.split('=')[1];
        var encoded_url = encodeURIComponent(url);

        animateUpdate();

        $.ajax({
            type: "GET",
            username: "hadoop",
            password: "tip",
            url: "http://hadoop:tip@tip:5555/api/v1/media.download/'" + encoded_url + "'," + encodeURIComponent("/data/video/youtube/" + id),
            headers: {
                Authorization: "Basic " + btoa("hadoop:tip")
            }
        }).done(function (dummy) {
            // do nothing
        }).fail(function (xhr, textStatus, errorThrown) {
            alert(JSON.stringify(xhr));
        });
    }

    function showVideo() {
        var url = $('#select-1 option:selected').text().trim().replace("=", "\\=");
        var id = url.split('=')[1];

        $.ajax({
            type: "GET",
            username: "hadoop",
            password: "tip",
            url: "http://hadoop:tip@tip:5555/api/v1/hdfs.ls/" + encodeURIComponent("/data/video/youtube/" + id),
            headers: {
                Authorization: "Basic " + btoa("hadoop:tip")
            }
        }).done(function (json) {
            var files = json['result'].split('\n');
            var path = '';
            var script = '';
            var video_url = '';
            var audio_url = '';
            var image_url = '';
            var desc = '';
            for (var i = 1; i < files.length - 1; i++) {
                path = files[i].substring(files[i].indexOf('/'));
                if (path.indexOf('.description') > 0) {
                    desc = path;
                }
                if (path.indexOf('.srt') > 0) {
                    script = path;
                }
                if (path.indexOf('.m4a') > 0) {
                    audio_url = 'http://tip:14000/webhdfs/v1' + path + '?user.name=hadoop&op=open';
                }
                if (video_url.length == 0 && path.indexOf('.mp4') > 0) {
                    video_url = 'http://tip:14000/webhdfs/v1' + path + '?user.name=hadoop&op=open';
                }
                if (path.indexOf('.jpg') > 0) {
                    image_url = 'http://tip:14000/webhdfs/v1' + path + '?user.name=hadoop&op=open';
                }
            }

            $('#video1').html('<video width="256" controls autoplay><source src="' + video_url + '"></source></audio>');

            if (audio_url.length > 0) {
                $('#audio1').html('<audio controls autoplay><source src="' + audio_url + '"></source></audio>');
            } else {
                $('#audio1').empty();
            }

            if (image_url.length > 0) {
                $('#image1').html('<img width="256px" src="' + image_url + '">');
            } else {
                $('#image1').empty();
            }

            $('#desc1').empty();
            showScript('#desc1', desc);

            $('#script1').empty();
            if (script.length > 0) {
                showScript('#script1', script);
            }
        }).fail(function (xhr, textStatus, errorThrown) {
            alert(JSON.stringify(xhr));
        });
    }

    function showScript(id, filename) {
        $.ajax({
            type: "GET",
            username: "hadoop",
            password: "tip",
            url: "http://hadoop:tip@tip:5555/api/v1/hdfs.text/" + encodeURIComponent(filename) + ",1000000",
            headers: {
                Authorization: "Basic " + btoa("hadoop:tip")
            }
        }).done(function (json) {
            var script = json['result'];
            $(id).text(script);
        }).fail(function (xhr, textStatus, errorThrown) {
            alert(JSON.stringify(xhr));
        });
    }
</script>

<!-- the following scripts are used in demo only for onpage help and you don't need them -->
<link rel="stylesheet" href="../assets/css/ace.onpage-help.css"/>
<link rel="stylesheet" href="../docs/assets/js/themes/sunburst.css"/>

<script type="text/javascript"> ace.vars['base'] = '..'; </script>
<script src="../assets/js/ace/elements.onpage-help.js"></script>
<script src="../assets/js/ace/ace.onpage-help.js"></script>
<script src="../docs/assets/js/rainbow.js"></script>
<script src="../docs/assets/js/language/generic.js"></script>
<script src="../docs/assets/js/language/html.js"></script>
<script src="../docs/assets/js/language/css.js"></script>
<script src="../docs/assets/js/language/javascript.js"></script>
</body>
</html>
